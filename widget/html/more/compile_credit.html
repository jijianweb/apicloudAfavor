<!doctype html>
<html lang="en">

	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" />
		<meta name="format-detection" content="telephone=no">
		<title>删除信用卡详情</title>
		<link rel="stylesheet" type="text/css" href="../../css/ct.css" />
		<style type="text/css">
			input[type="month"] ,
			input[type="text"],
			.value_text {
				outline: none;
				resize: none;
				border: 1px solid #CCCCCC;
				color: #000;
				border-radius: 25px;
				width: 100%;
			}
			
			.sel-bor {
				border: 1px solid #CCCCCC;
				border-radius: 25px;
				width: 100%;
			}
			
			.sel {
				color: #000;
				outline: none;
				resize: none;
				padding: 12px 0px 11px 10px;
				font-size: 12px;
				width: 95%;
				border: none;
				appearance: none;
				-moz-appearance: none;
				-webkit-appearance: none;
				background: url(../../image/down.png)no-repeat scroll right center transparent;
				background-size: 13px 8px;
			}
			
			input[type="password"],
			input[type="text"],
			.value_text {
				padding: 10px 0 10px 15px;
				margin-bottom: 10px;
			}
			
			input[type="month"] {
				margin-bottom: 10px;
				padding:2px 11px 0px 16px;
				height: 45px;
			}
			
			.text {
				color: #858B8B;
				font-size: 14px;
				padding: 0 0px 5px 14px;
			}
			
			.card {
				font-size: 12px;
				color: #858B8B;
				text-align: right;
				padding: 6px 5px 0px 0;
			}
			
			.foot{
            	padding:100px 0px 0px;
            	width:100%;
            }
			.save {
				background-color: #32BBB1;
				border-radius: 25px;
				text-align: center;
				color: white;
				position: relative;
                bottom: 16px;
			}
			
			.btn-card {
				width: 50px;
				height: 28px;
				border: 1px solid #CFEEEB;
				background-color: #32BBB1;
				border-radius: 25px;
			}
			
			.cirlce {
				width: 50px;
				height: 50px;
				background-image: url(../../image/post/lock.png);
				background-size:contain;
				background-repeat: no-repeat;
				background-position: center;
				margin: 0 auto;
			}
			
			.bom-t {
				text-align: center;
				color: #D7D8DA;
				font-size: 12px;
				padding-top: 10px;
				width: 210px;
				margin: 0 auto;
			}
			.copy{
				padding-bottom: 50px 0;margin-top: 40px;
			}
			/*样式调整2017-11-5*/
			input[type="text"],
			.value_text{
				padding: 13px 22px 13px;
				font-size: 14px;
				margin-bottom:30px;
			}
			.text{
				padding-bottom: 9px;
				padding-left: 22px;
			}
			#main{
				padding-top: 22px;
				padding: 20px 18px 0;
			}
			.sel{
				font-size: 14px;
				margin: 0;
				padding: 13px 22px;
			}
			/*华为按钮调整*/
			@media (max-height:400px){
				.save{
					display: none;
				}
			}	
		</style>
	</head>

	<body>
		<div id="wrap">
			<div id="main">
				<div class="hidden">
					<div>
						<span class="text">Name</span>
						<input type="text" placeholder="" />
					</div>
					<div>
						<span class="text">Card number</span>
						<input type="text" placeholder="" />
					</div>
					<div class="flex-box">
						<div class="flex-1">
							<div class="text">Expire Date</div>
							<input type="month" />
						</div>
						<div class="flex-1" style="margin-left: 15px;">
							<div class="text">Security Code</div>
							<input type="text" />
						</div>
					</div>
					<div>
						<span class="text">Street Address</span>
						<input type="text" />
					</div>
					<div>
						<span class="text">City</span>
						<input type="text" placeholder="" />
					</div>

					<div class="flex-box">
						<div class="flex-1">
							<div class="text">Province</div>
							<div class="sel-bor">
								<select name="" class="sel">
									<option value="">ON</option>
								</select>
							</div>
						</div>
						<div class="flex-1 " style="margin-left: 15px;">
							<div class="text">Postal Code</div>
							<div><input type="text" placeholder="" /></div>
						</div>
					</div>
					<div class="copy" >
						<div class="cirlce"></div>
						<div class="bom-t">Afavor will maintain the confidentiality of your information</div>
					</div>
				</div>
			</div>
		</div>
	</body>
	<script type="text/javascript" src="../../script/api.js"></script>
	<script type="text/javascript" src="../../script/doT.min.js"></script>
	<script type="text/javascript" src="../../script/common.js"></script>
	<script type="text/javascript" src="../../script/area.js"></script>
	<script type="text/javascript" src="../../script/UiActionSelector.js"></script>
	<script src="../../script/jquery-1.9.1.min.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript" src="../../res/language.js" ></script>
	<script type="text/template" template="main">
		<div class="" style="">
			<div>
				<span lan="Name" class="text">Name</span>
				<div class="value_text">
					{{=it.name }}
				</div>
			</div>
			<div>
				<span lan="Card_number" class="text">Card number</span>
				<div class="value_text">
					{{=it.number }}
				</div>
			</div>
			<div class="flex-box">
				<div class="flex-1">
					<div lan="ExpireDate" class="text">Expire Date</div>
					<input readonly="readonly" type="month" id="expire" value="{{=it.expiredate}}" />
				</div>
				<div class="flex-1" style="margin-left: 15px;">
					<div lan="SecurityCode" class="text">Security Code</div>
					<div class="value_text">
						{{=it.securitycode }}
					</div>
				</div>
			</div>
			<div>
				<span lan="StreetAddress" class="text">Street Address</span>
				<div class="value_text">
					{{=it.street}}
				</div>
			</div>
			<div>
				<span lan="City" class="text">City</span>
				<div id="city" class="value_text" tapmode>
					{{=curCity.city.name || '&nbsp;'}}
				</div>
			</div>

			<div class="flex-box">
				<div class="flex-1">
					<div lan="Province" class="text">Province</div>
					<div class="sel-bor">
						<div id="province" class="sel" tapmode>
							{{= curCity.province.name || '&nbsp;'}}
						</div>
					</div>
				</div>
				<div class="flex-1 " style="margin-left: 15px;">
					<div lan="PostalCode" class="text">Postal Code</div>
					<div class="value_text">
						{{=it.postalcode}}
					</div>
				</div>
			</div>
			<div class="copy" >
				<div class="cirlce"></div>
				<div lan="AddCreditCardTip" class="bom-t">Afavor will maintain the confidentiality <br /> of your information</div>
			</div>
		</div>
		<div class="foot" id="footer">
				<div class="save btn-afavor-1" lan="REMOVE_CARD" onclick="removeCard()" tapmode="">REMOVE CARD</div>
		</div>
	</script>
	<script type="text/javascript">
		apiready = function() {
			var pid = "";
			init();
		}
		var curCity = {
			country: {},
			province: {},
			city: {}
		};
        var initBodyHeight = document.body.clientHeight;//页面可视高度
//			console.log(initBodyHeight)
	    var keyBoardStatus = false;//键盘是否打开
	    function getKeyBoardStatus(){
	  		setTimeout(function(){
	        if(initBodyHeight != document.body.clientHeight && keyBoardStatus == false){
	          keyBoardStatus = true;
				$api.addCls($api.dom('#footer'), 'hidden');
	          getKeyBoardStatus();
	          return false;
	        }
	        if(initBodyHeight == document.body.clientHeight && keyBoardStatus == true){
	          keyBoardStatus = false;
				$api.removeCls($api.dom('#footer'), 'hidden');
	          getKeyBoardStatus();
	          return false;
	        }
	        getKeyBoardStatus();
	      },100);
	    }
//		$(function() {
//	    	getKeyBoardStatus();
//	    });
		function init() {
			pid = api.pageParam.pid;
			ajax.get({
				ctrl: 'more',
				fn: 'getPayDetail',
				data: {
					values: {
						id: $api.getStorage(CONFIG.KEY.MEMBER_ID),
						token: $api.getStorage(CONFIG.KEY.TOKEN),
						type: 1,
						pid: pid
					}
				},
				showError: true,
				success: function(ct) {
					curCity = Area.getCityName(ct.country, ct.privince, ct.city)
					T.html('#main', 'main', ct);
					L.init();
				}
			});
		}

		function removeCard() {
			pid = api.pageParam.pid;
			ajax.get({
				ctrl: 'more',
				fn: 'delPayments',
				data: {
					values: {
						id: $api.getStorage(CONFIG.KEY.MEMBER_ID),
						token: $api.getStorage(CONFIG.KEY.TOKEN),
						type: 1,
						pid: pid
					}
				},
				showProgress: true,
				hideLoading: true,
				showError: true,
				success: function() {
					Tool.toast('Delete Successfully.');
					api.execScript({
						name: 'PaymentMethod',
						frameName: 'make_payments',
						script: 'init()'
					});
					setTimeout(api.closeWin, 300);
				}
			});
		}
	</script>

</html>