<!doctype html>
<html lang="en">
 
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" />
		<meta name="format-detection" content="telephone=no">
		<title>评价-发布者</title> 
		<link rel="stylesheet" type="text/css" href="../../css/ct.css" />
		<style type="text/css">
			.list{
				background-color: #EFEFEF;
				border-radius: 10px;
				margin: 10px;
			}
			
			.title {
				display: -webkit-box !important;
				overflow: hidden;
				text-overflow: ellipsis;
				word-break: normal;
				word-wrap:break-word;
				-webkit-box-orient: vertical;
				-webkit-line-clamp: 2;
				font-size: 14px;
				margin-top: 10px;
				height: 33px;
			}
			
			.text {
				font-size: 11px;
				color: #868686;
				word-wrap: break-word;
				margin-top: 3px;
			}
			
			.text2 {
				font-size: 14px;
				color: #868686;
				padding-top: 4px;
				width: 126px;
			}
			
			.content {
				padding: 0 5px 0 10px;
			}
			
			.num {
				color: #3EBBB2;
				font-size: 32px;
				margin-top: 30%;
				margin-bottom: 10px;
			}
			
			.img-frm,
			.head {
				width: 68px;
				height: 68px;
				background-color: #83D3D0;
				border-radius: 50%;
				border: 1px solid #CFEEEB;
				background-repeat: no-repeat;
				background-position: center;
				background-size: cover;
				margin-left: 10px;
				margin-top: 10px;
				margin-bottom:24px;
			}
			
			.ic {
				width: 12px;
				height: 12px;
				background-image: url(../../image/browse/2.png);
				background-repeat: no-repeat;
				background-position: center;
				background-size: contain;
				margin-right: 5px;
			}
			
			.name {
				color: #83D3D0;
			}
			
			.money {
				text-align: center;
			}
			
			
			
			.img2 {
				height: 8px;
				margin: 2px auto;
			}
			
			.love {
				text-align: right;
			}
			
			.grade {
				padding: 10px 0px;
				margin-left: 53px;
			}
			
			.but {
				background-color: #32BBB1;
				border-radius: 0 0 10px 10px;
				box-shadow:3px 4px 14px rgba(0,0,0,0.2);
			}
			
			.message {
				background-color: #FFFFFF;
				border-left: 2px solid #32BBB1;
				border-right: 2px solid #32BBB1;
				padding-top: 9px;
			}
			
			.name2 {
				color: #83D3D0;
				padding-left: 20px;
				margin:10px 0 6px;
			}
			
			.title2 {
				overflow: hidden;
				text-overflow: ellipsis;
				word-break: normal;
				word-wrap:break-word;
				-webkit-box-orient: vertical;
				-webkit-line-clamp: 2;
				font-size: 12px;
				margin: auto 20px;
				padding-bottom: 20px;
			}
			
			.show {
				display: none;
			}
			
			.text1 {
				color: #909090;
				font-size: 12px;
				border-radius: 60px;
				background-color: #EFEFEF;
				height: 35px;
				line-height: 35px;
				width: 30%;
			}
			
			.money {
				color: #EECD49;
				font-size: 35px;
				margin: 0 15px;
			}
			
			.bottom {
				margin: 15px auto;
			}
			.bounces.active img{
				transform: rotate(90deg);
				-webkit-transform: rotate(180deg);
			}

			.star {
				width: 29px;
				height:29px;
				background-size: 25px 25px;
				background-repeat: no-repeat;
				background-position: center;
				background-image: url(../../image/star.png);
			}
		</style>
	</head>

	<body>
		<div id="wrap">
			<div id="main">
				<div class="list hidden">
					<div class="flex-box">
						<div class="head"></div>
						<div class="flex-1 flex-box content">
							<div class="flex-1">
								<div class="title">Assemble IKEAsofabed and removeAssemble IKEAsofabed and removeAssemble IKEAsofabed and remove</div>
								<div class="flex-1 flex-box flex-h-ce">
									<div class="ic"></div>
									<!--<icon></icon>-->
									<div class="flex-1 text">Online</div>
								</div>
								<div class="text margin-bottom10">Completed by - <span class="name">Roy and Miksaaaaaaaaaaaae</span></div>
							</div>
							<div class="money flex-box-v">
								<div class="num flex-1">$214444</div>
								<div class="text margin-bottom10 text-right">May 10 2017</div>
							</div>
						</div>
					</div>
					<div class="but">
						<div class="message">
							<div class="flex-box grade flex-h-ce">
								<div class=" text-left text2 ">Work Environment</div>
								<div class="flex-box">
									<div class="star"></div>
									<div class="star"></div>
									<div class="star"></div>
									<div class="star"></div>
									<div class="star"></div>
									
								</div>
							</div>
							<div class="flex-box grade flex-h-ce">
								<div class=" text-left text2 ">Diffsds</div>
								<div class="flex-box">
									<div class="star"></div>
									<div class="star"></div>
									<div class="star"></div>
									<div class="star"></div>
									<div class="star"></div>
									
								</div>
							</div>
							<div class="flex-box grade flex-h-ce">
								<div class=" text-left text2 ">Attitude</div>
								<div class="flex-box">
									<div class="star"></div>
									<div class="star"></div>
									<div class="star"></div>
									<div class="star"></div>
									<div class="star"></div>
								</div>
							</div>
							<div class="name2">
								John Smith:
							</div>
							<div class="title2">
								kdabskhbcakhsbckhxbchysbckhxzbcjasbjhxbcaisvbcjkxh ajsbdkajszbcjhavskajbskhbakhcbakjsh
							</div>
						</div>
						<div class="text-center" onclick="show()" tapmode><img src="../../image/sort-down.png" class="img2" /></div>
					</div>

				</div>
				<div class="list list-item hidden">
					<div class="flex-box">
						<div class="head"></div>
						<div class="flex-1 flex-box content">
							<div class="flex-1">
								<div class="title">Assemble IKEAsofabed and removeAssemble IKEAsofabed and removeAssemble IKEAsofabed and remove</div>
								<div class="flex-1 flex-box flex-h-ce">
									<div class="ic"></div>
									<!--<icon></icon>-->
									<div class="flex-1 text">Online</div>
								</div>
								<div class="text margin-bottom10">Ongoing by - <span class="name">Roy and Mike</span></div>
							</div>
							<div class="money flex-box-v">
								<div class="num flex-1">$214</div>
								<div class="text margin-bottom10">May 10 2017</div>
							</div>
						</div>
					</div>
					<div class="but">
						<div class="message  show">
							<div class="flex-box grade ">
								<span class="flex-1 text-right text2 ">Work Environment</span>
								<span class="flex-1">
									<img src="../../image/star.png" class="img">
									<img src="../../image/star.png" class="img">
									<img src="../../image/star.png" class="img">
									<img src="../../image/star.png" class="img">
								</span>
							</div>
							<div class="flex-box grade">
								<span class="flex-1 text-right text2">Diffsds</span>
								<span class="flex-1">
									<img src="../../image/star.png" class="img">
									<img src="../../image/star.png" class="img">
									<img src="../../image/star.png" class="img">
									<img src="../../image/star.png" class="img">
								</span>
							</div>
							<div class="flex-box grade">
								<span class="flex-1 text-right text2">Attitude</span>
								<span class="flex-1">
									<img src="../../image/star.png" class="img">
									<img src="../../image/star.png" class="img">
									<img src="../../image/star.png" class="img">
									<img src="../../image/star.png" class="img">
								</span>
							</div>
							<div class="name2">
								John Smith:
							</div>
							<div class="title2">
								kdabskhbcakhsbckhxbchysbckhxzbcjasbjhxbcaisvbcjkxh ajsbdkajszbcjhavskajbskhbakhcbakjsh
							</div>
						</div>
						<div class="text-center" onclick="show()" tapmode><img src="../../image/sort-down.png" class="img2" /></div>
					</div>

				</div>
			</div>
		</div>
	</body>
	<script type="text/javascript" src="../../script/api.js"></script>
	<script type="text/javascript" src="../../script/doT.min.js"></script>
	<script type="text/javascript" src="../../script/common.js"></script>
	<script src="../../script/jquery-1.9.1.min.js" type="text/javascript" charset="utf-8"></script>
	<script src="../../script/jquery.lazyload.min.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript" src="../../res/language.js" ></script>
	<script type="text/template" template="main">
		{{? it instanceof Array && it.length != 0}}
		   {{~ it:value:index}}
		       <div class="list"  onclick="openTaskDetail({{= value.favorid}},{{= value.isdel}})" tapmode>
					<div class="flex-box">
						<div class="head"  style="background-image:url({{=Tool.imageCompressByQiNiu(value.avatar,0,200,200)}})"></div>
						<div class="flex-1 flex-box content">
							<div class="flex-1">
								<div class="title ">{{=value.title}}</div>
								<div class="flex-1 flex-box flex-h-ce " style="margin-top: 8px;">
									<div class="ic"></div>
									<div class="flex-1 text ">
										{{? value.favortype ==1}}
										       {{=value.location}}
										{{??}}
										       {{= LANGUAGE[$api.getStorage('lan')]['Online'] }}
										{{?}}
									</div>
								</div>
								<div class="text margin-bottom10 ">
									{{= LANGUAGE[$api.getStorage('lan')]['Completed_by'] }}
									 - <span class="name">{{=value.helpname}}</span>
								</div>
							</div>
							<div class="money flex-box-v ">
								<div class="num flex-1 text-overflow">{{=it.default_currency == 'cad' ? 'C$' : '$'}}{{=value.total}}</div>
								<div class="text margin-bottom10 text-right">{{= Tool.toEngDate(value.completetime,'YMD')}}</div>
							</div>
						</div>
					</div>
					<div class="but">
						<div class="message show">
						{{? value.favortype==2}}
						    <div class="flex-box grade flex-h-ce">
								<div class=" text-left text2" lan="Communication">Communication</div>
								<div class="flex-box">
									{{? value.communication >=0}} 
										{{for(var i=0;i<5;i++) { }} 
										    {{? i< value.communication}}
									           <div class="star"></div>
										    {{?}}
										{{ } }}
									{{?}}
								</div>
							</div>
							<div class="flex-box grade flex-h-ce">
								<div class=" text-left text2" lan="WouldRecommend">Would Recommend</div>
								<div class="flex-box">
									{{? value.difficulty >=0}} 
										{{for(var i=0;i<5;i++) { }} 
										    {{? i< value.difficulty}}
									           <div class="star"></div>
										    {{?}}
										{{ } }}
									{{?}}
								</div>
							</div>
						{{?? value.favortype==1}}
						<div class="flex-box grade flex-h-ce">
								<div class="text-left text2"lan="Work_Environment">Work Environment</div>
								<div class="flex-box">
									{{? value.environment >=0}} 
										{{for(var i=0;i<5;i++) { }} 
										    {{? i< value.environment}}
									           <div class="star"></div>
										    {{?}}
										{{ } }}
									{{?}}
								</div>
							</div>
							<div class="flex-box grade flex-h-ce">
								<div class=" text-left text2" lan="Attitude">Attitude</div>
								<div class="flex-box">
									{{? value.attitude >=0}} 
										{{for(var i=0;i<5;i++) { }} 
										    {{? i< value.attitude}}
									           <div class="star"></div>
										    {{?}}
										{{ } }}
									{{?}}
								</div>
							</div>							
							<div class="flex-box grade flex-h-ce">
								<div class=" text-left text2" lan="WouldRecommend">Would Recommend</div>
								<div class="flex-box">
									{{? value.difficulty >=0}} 
										{{for(var i=0;i<5;i++) { }} 
										    {{? i< value.difficulty}}
									           <div class="star"></div>
										    {{?}}
										{{ } }}
									{{?}}
								</div>
							</div>
						    {{?}}
						    
						    {{? value.message }}
							<div class="name2">
								{{=value.helpname}}:
							</div>
							<div class="title2">
								{{=value.message }}
							</div>
							{{?}}
						</div>
						<div class="text-center bounces" onclick="showTime(this, event)" tapmode><img src="../../image/sort-down.png" class="img2" /></div>
					</div>
				</div>
		   {{~}} 
		{{??}}
			<div class="null flex-box">
				<div class="flex-1" lan="You_have_no_received_any_ratings">
					You haven’t received any ratings yet.
				</div>
			</div>
		{{?}} 
	</script>
	<script type="text/javascript">
		apiready = function() {
			init();
			Refresh.init({
				ctrl: 'more',
				fn: 'getRatings',
				values: {
						id: $api.getStorage(CONFIG.KEY.MEMBER_ID),
						token: $api.getStorage(CONFIG.KEY.TOKEN),
						type:1
					},
			    showError: true,
				template: 'main',
				field: 'list',
				container:'#main',
				success:function(ct){
					$('div.img').lazyload({
						effect: "fadeIn"
					});
					if(api.deviceModel == 'iPhone 5'){
						$('.text2').css({
							'width': '115px'
						});
					}								
				}
			});
			LoadMore.init({
				ctrl: 'more',
				fn: 'getRatings',
				values: {
						id: $api.getStorage(CONFIG.KEY.MEMBER_ID),
						token: $api.getStorage(CONFIG.KEY.TOKEN),
						type:1
					},
				showError: true,
				template: 'main',
				field: 'list',
				container:'#main',
				success:function(){
					$('div.img').lazyload({
						effect: "fadeIn"
					});
					if(api.deviceModel == 'iPhone 5'){
						$('.text2').css({
							'width': '115px'
						});
					}								
				}
			});
		}

	    function showTime(_this, e) {
	    	e.stopPropagation();
			var	fatherDom = $api.closest(_this, '.list'),
				_dom = $api.dom(fatherDom, '.message');
			$api.toggleCls(_this, 'active');
			if($api.hasCls(_dom, 'show')){
				$api.removeCls(_dom, 'show');
				
			}else{
				$api.addCls(_dom, 'show');
			}

		}
        //打开已完成的任务详情
        function openTaskDetail(favorid,isdel){
        	if(isdel==1){
        		Tool.toast('This favor is not exist.');
				return;
			}else{
				api.openWin({
					name: 'task_detail',
					url: api.wgtRootDir + '/html/window/share_normal.html',
					pageParam: {
						frameName: 'my_task_detail',
						frameUrl: api.wgtRootDir + '/html/my_favors/my_task_detail.html',
						frameParam: {
							favorid:favorid
						},
						headerTitle: 'Favor Details',
					},
					reload: true,
					slidBackEnabled: false,
				});
			}
        }
		function init() {
			ajax.get({
				ctrl: 'more',
				fn: 'getRatings',
				data: {
					values: {
						id: $api.getStorage(CONFIG.KEY.MEMBER_ID),
						token: $api.getStorage(CONFIG.KEY.TOKEN),
						type:1
					}
				},
				showError: true,
				hideLoading: true,
				success: function(ct) {
					T.html('#main', 'main', ct.list);
					$('div.img').lazyload({
						effect: "fadeIn"
					});
					if(api.deviceModel == 'iPhone 5'){
						$('.text2').css({
							'width': '115px'
						});
					}								
					var stars=ct.star
//					    rtype=1;
//					var ratings={
//						stars:stars,
//						rtype:rtype
//					}
//					$api.setStorage('ratings',ratings)
					api.sendEvent({
						name: 'ratings',
						extra:{
							star:stars,
							type:1
						}
					});
					L.init();
				}
			});
		}
	</script>
</html>